# Audit Result: Story 2.5 + Story 2.6

Date: 2026-02-20
Reviewer: BMad Master
Scope: `Story 2.5 (Bulk upload topics CSV)`, `Story 2.6 (Release topic by admin)`
Status: recorded for later fix

## Findings

1. **Medium** — Invalid bulk payload is treated as successful request.
- File: `backend/src/server.mjs:362`
- Current behavior: non-array body is coerced to `[]`, response `200 { created: 0, errors: [] }`.
- Risk: client integration errors are hidden.

2. **Medium** — Release denied branches are not audited.
- File: `backend/src/server.mjs:409`
- Current behavior: `404 NOT_FOUND` and `409 TOPIC_ALREADY_FREE` return without `logAudit`.
- Risk: incomplete audit trail for admin actions.

3. **Low** — Backend tests for release do not validate audit quality/denied branches.
- File: `backend/src/auth.test.mjs:407`
- Missing: assertions for `result/actor/ip`, and denied-path audit behavior.

4. **Low** — Frontend tests for 2.5/2.6 are mostly render smoke tests.
- File: `frontend/src/App.test.tsx:34`
- Missing: interaction flows (`bulk upload request/response`, `release confirm -> row update`).

## Residual Risks

1. Silent success on malformed bulk topic payload.
2. Missing observability of denied release attempts.
3. Potential UI regressions not covered by interaction tests.

## Suggested Follow-up Fix Order

1. Backend contract hardening for `/admin/topics/bulk` invalid body.
2. Add denied-path audit logging for `/admin/topics/:id/release`.
3. Extend backend tests for audit assertions.
4. Add frontend interaction tests for bulk upload and release flow.
